"use strict";var menu=document.querySelector("#menu"),toggle=document.querySelector("#toggle");menu&&menu.classList.add("_active"),toggle&&toggle.addEventListener("click",function(e){menu.classList.toggle("_open")});var loadingBlock=document.querySelector("._loading"),paged=loadingBlock.getAttribute("data-paged"),maxPages=loadingBlock.getAttribute("data-max_pages");console.log(paged);var menuList=document.querySelector("#menu-list"),menuListToggle=document.querySelector("#menu-list-toggle");menuList&&menuList.classList.add("_active"),menuListToggle&&menuListToggle.addEventListener("click",function(e){menuList.classList.toggle("_open")});var cakesList,modal,showModal,swiper,ESCAPE_KEY_CODE=27;document.querySelector("#cakes-list")&&(cakesList=document.querySelector("#cakes-list"),modal=document.querySelector("#modal"),showModal=function(e){console.log("работает"),e.preventDefault(),modal.classList.add("_active"),document.addEventListener("keydown",function(e){e.keyCode===ESCAPE_KEY_CODE&&modal.classList.remove("_active")},{once:!0})},Array.from(cakesList.children).forEach(function(e){e.addEventListener("click",showModal)})),document.querySelector(".swiper-container")&&(swiper=new Swiper(".swiper-container",{speed:400,slidesPerView:1,centeredSlides:!0,autoplay:{delay:4e3,disableOnInteraction:!1},effect:"fade",spaceBetween:30,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})),document.querySelector("input[data-tel-input")&&document.addEventListener("DOMContentLoaded",function(){function i(e){return e.value.replace(/\D/g,"")}var e=document.querySelector("input[data-tel-input");e.addEventListener("input",function(e){var t=e.target,n=i(t),a="",o=t.selectionStart;if(!n)return t.value="";t.value.length==o?(["7","8","9"].includes(n[0])?("9"==n[0]&&(n="7"+n),a=("8"==n[0]?"8":"+7")+" ",1<n.length&&(a+="("+n.substring(1,4)),5<=n.length&&(a+=") "+n.substring(4,7)),8<=n.length&&(a+="-"+n.substring(7,9)),10<=n.length&&(a+="-"+n.substring(9,11))):a="+"+n,t.value=a):e.data&&/\D/g.test(e.data)&&(t.value=n)}),e.addEventListener("keydown",function(e){var t=e.target;8==e.keyCode&&1==i(t).length&&(t.value="")}),e.addEventListener("paste",function(e){var t,n=e.clipboardData||window.clipboardData,a=e.target,o=i(a);n&&(t=n.getData("Text"),/\D/g.test(t)&&(a.value=o))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1cmdlci1tZW51LmpzIiwibG9hZG1vcmUuanMiLCJtZW51LWxpc3QuanMiLCJtb2RhbC5qcyIsInNsaWRlci5qcyIsInRlbC1tYXNrLmpzIl0sIm5hbWVzIjpbIm1lbnUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImxvYWRpbmdCbG9jayIsInBhZ2VkIiwiZ2V0QXR0cmlidXRlIiwibWF4UGFnZXMiLCJjb25zb2xlIiwibG9nIiwibWVudUxpc3QiLCJtZW51TGlzdFRvZ2dsZSIsImNha2VzTGlzdCIsIm1vZGFsIiwic2hvd01vZGFsIiwic3dpcGVyIiwiRVNDQVBFX0tFWV9DT0RFIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJrZXlDb2RlIiwicmVtb3ZlIiwib25jZSIsIkFycmF5IiwiZnJvbSIsImNoaWxkcmVuIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJTd2lwZXIiLCJzcGVlZCIsInNsaWRlc1BlclZpZXciLCJjZW50ZXJlZFNsaWRlcyIsImF1dG9wbGF5IiwiZGVsYXkiLCJkaXNhYmxlT25JbnRlcmFjdGlvbiIsImVmZmVjdCIsInNwYWNlQmV0d2VlbiIsImxvb3AiLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwiZ2V0SW5wdXROdW1iZXJzVmFsdWUiLCJpbnB1dCIsInZhbHVlIiwicmVwbGFjZSIsInBob25lSW5wdXQiLCJ0YXJnZXQiLCJpbnB1dE51bWJlcnNWYWx1ZSIsImZvcm1hdGVkSW5wdXRWYWx1ZSIsInNlbGVjdGlvblN0YXJ0IiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJzdWJzdHJpbmciLCJkYXRhIiwidGVzdCIsInBhc3RlZFRleHQiLCJwYXN0ZWQiLCJjbGlwYm9hcmREYXRhIiwid2luZG93IiwiZ2V0RGF0YSJdLCJtYXBwaW5ncyI6ImFBRUEsSUFBQUEsS0FBQUMsU0FBQUMs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T0FDQUMsRUFBQU4sRUFBQUMsR0FFQWMsSUFDQUQsRUFBQUMsRUFBQUcsUUFBQSxRQUNBLE1BQUFMLEtBQUFDLEtBQ0FiLEVBQUFDLE1BQUFJIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIlxuXG5jb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lbnUnKTtcbmNvbnN0IHRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2dnbGUnKTtcblxuaWYgKG1lbnUpIHtcbiAgbWVudS5jbGFzc0xpc3QuYWRkKCdfYWN0aXZlJyk7XG59XG5cbmlmKHRvZ2dsZSkgeyAgXG4gIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT4geyAgICBcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ19vcGVuJyk7ICAgIFxuICB9KVxufSIsIlwidXNlIHN0cmljdFwiXG5cbmxldCBsb2FkaW5nQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuX2xvYWRpbmcnKTtcbmxldCBwYWdlZCA9IGxvYWRpbmdCbG9jay5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFnZWQnKTtcbmxldCBtYXhQYWdlcyA9IGxvYWRpbmdCbG9jay5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWF4X3BhZ2VzJyk7XG5jb25zb2xlLmxvZyhwYWdlZClcbi8vIGpRdWVyeShmdW5jdGlvbigkKXtcblxuLy8gXHQvLyDQvtC/0YDQtdC00LXQu9GP0LXQvCDQsiDQv9C10YDQtdC80LXQvdC90YvQtSDQutC90L7Qv9C60YMsINGC0LXQutGD0YnRg9GOINGB0YLRgNCw0L3QuNGG0YMg0Lgg0LzQsNC60YHQuNC80LDQu9GM0L3QvtC1INC60L7Quy3QstC+INGB0YLRgNCw0L3QuNGGXG4vLyBcdHZhciBidXR0b24gPSAkKCAnI2xvYWRtb3JlIGEnICksXG4vLyBcdCAgICBwYWdlZCA9IGJ1dHRvbi5kYXRhKCAncGFnZWQnICksXG4vLyBcdCAgICBtYXhQYWdlcyA9IGJ1dHRvbi5kYXRhKCAnbWF4X3BhZ2VzJyApO1xuXG4vLyBcdGJ1dHRvbi5jbGljayggZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4vLyBcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8g0L/RgNC10LTQvtGC0LLRgNCw0YnQsNC10Lwg0LrQu9C40Log0L/QviDRgdGB0YvQu9C60LVcblxuLy8gXHRcdCQuYWpheCh7XG4vLyBcdFx0XHR0eXBlIDogJ1BPU1QnLFxuLy8gXHRcdFx0dXJsIDogbWlzaGEuYWpheF91cmwsIC8vINC/0L7Qu9GD0YfQsNC10Lwg0LjQtyB3cF9sb2NhbGl6ZV9zY3JpcHQoKVxuLy8gXHRcdFx0ZGF0YSA6IHtcbi8vIFx0XHRcdFx0cGFnZWQgOiBwYWdlZCwgLy8g0L3QvtC80LXRgCDRgtC10LrRg9GJ0LXQuSDRgdGC0YDQsNC90LjRhlxuLy8gXHRcdFx0XHRhY3Rpb24gOiAnbG9hZG1vcmUnIC8vINGN0LrRiNC10L0g0LTQu9GPIHdwX2FqYXhfINC4IHdwX2FqYXhfbm9wcml2X1xuLy8gXHRcdFx0fSxcbi8vIFx0XHRcdGJlZm9yZVNlbmQgOiBmdW5jdGlvbiggeGhyICkge1xuLy8gXHRcdFx0XHRidXR0b24udGV4dCggJ9CX0LDQs9GA0YPQttCw0LXQvC4uLicgKTtcbi8vIFx0XHRcdH0sXG4vLyBcdFx0XHRzdWNjZXNzIDogZnVuY3Rpb24oIGRhdGEgKXtcblxuLy8gXHRcdFx0XHRwYWdlZCsrOyAvLyDQuNC90LrRgNC10LzQtdC90YIg0L3QvtC80LXRgNCwINGB0YLRgNCw0L3QuNGG0Ytcbi8vIFx0XHRcdFx0YnV0dG9uLnBhcmVudCgpLmJlZm9yZSggZGF0YSApO1xuLy8gXHRcdFx0XHRidXR0b24udGV4dCggJ9CX0LDQs9GA0YPQt9C40YLRjCDQtdGJ0ZEnICk7XG5cbi8vIFx0XHRcdFx0IC8vINC10YHQu9C4INC/0L7RgdC70LXQtNC90Y/RjyDRgdGC0YDQsNC90LjRhtCwLCDRgtC+INGD0LTQsNC70Y/QtdC8INC60L3QvtC/0LrRg1xuLy8gXHRcdFx0XHRpZiggcGFnZWQgPT0gbWF4UGFnZXMgKSB7XG4vLyBcdFx0XHRcdFx0YnV0dG9uLnJlbW92ZSgpO1xuLy8gXHRcdFx0XHR9XG5cbi8vIFx0XHRcdH1cblxuLy8gXHRcdH0pO1xuXG4vLyBcdH0gKTtcbi8vIH0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCJcblxuY29uc3QgbWVudUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVudS1saXN0Jyk7XG5jb25zdCBtZW51TGlzdFRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51LWxpc3QtdG9nZ2xlJyk7XG5cbmlmIChtZW51TGlzdCkge1xuICBtZW51TGlzdC5jbGFzc0xpc3QuYWRkKCdfYWN0aXZlJyk7XG59XG5cbmlmKG1lbnVMaXN0VG9nZ2xlKSB7ICBcbiAgbWVudUxpc3RUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKT0+IHsgICAgXG4gICAgbWVudUxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgnX29wZW4nKTsgICAgXG4gIH0pXG59IiwiXCJ1c2Ugc3RyaWN0XCJcbmNvbnN0IEVTQ0FQRV9LRVlfQ09ERSA9IDI3O1xuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYWtlcy1saXN0XCIpKSB7XG4gIGNvbnN0IGNha2VzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FrZXMtbGlzdFwiKTtcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsXCIpO1xuXG4gIGNvbnN0IHNob3dNb2RhbCA9IChldnQpID0+IHtcbiAgICBjb25zb2xlLmxvZygn0YDQsNCx0L7RgtCw0LXRgicpXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIl9hY3RpdmVcIik7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IEVTQ0FQRV9LRVlfQ09ERSl7XG4gICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJfYWN0aXZlXCIpO1xuICAgICAgfVxuICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gIH1cblxuICBBcnJheS5mcm9tKGNha2VzTGlzdC5jaGlsZHJlbikuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHNob3dNb2RhbClcbiAgfSlcbn1cbiIsImlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1jb250YWluZXJcIikpIHtcbiAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoXCIuc3dpcGVyLWNvbnRhaW5lclwiLCB7XG4gICAgc3BlZWQ6IDQwMCxcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxuICAgIGF1dG9wbGF5OiB7XG4gICAgICBkZWxheTogNDAwMCxcbiAgICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcbiAgICB9LFxuICAgIGVmZmVjdDogXCJmYWRlXCIsXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcbiAgICBsb29wOiB0cnVlLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxuICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgIH0sXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgbmV4dEVsOiBcIi5zd2lwZXItYnV0dG9uLW5leHRcIixcbiAgICAgIHByZXZFbDogXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIsXG4gICAgfSxcbiAgfSk7XG59XG4iLCJcInVzZSBzdHJpY3RcIlxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W2RhdGEtdGVsLWlucHV0JykpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgcGhvbmVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W2RhdGEtdGVsLWlucHV0Jyk7XG4gIFxuICAgIGNvbnN0IGdldElucHV0TnVtYmVyc1ZhbHVlID0gZnVuY3Rpb24oaW5wdXQpe1xuICAgICAgcmV0dXJuIGlucHV0LnZhbHVlLnJlcGxhY2UoL1xcRC9nLCBcIlwiKTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IG9uUGhvbmVJbnB1dCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnN0IGlucHV0ID0gZS50YXJnZXQ7XG4gICAgICBsZXQgaW5wdXROdW1iZXJzVmFsdWUgPSBnZXRJbnB1dE51bWJlcnNWYWx1ZShpbnB1dCk7XG4gICAgICBsZXQgZm9ybWF0ZWRJbnB1dFZhbHVlID0gXCJcIjtcbiAgICAgIGxldCBzZWxlY3Rpb25TdGFydCA9IGlucHV0LnNlbGVjdGlvblN0YXJ0O1xuICBcbiAgICAgIGlmICghaW5wdXROdW1iZXJzVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGlucHV0LnZhbHVlLmxlbmd0aCAhPSBzZWxlY3Rpb25TdGFydCkge1xuICAgICAgICBpZiAoZS5kYXRhICYmIC9cXEQvZy50ZXN0KGUuZGF0YSkpIHtcbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IGlucHV0TnVtYmVyc1ZhbHVlO1xuICAgICAgICB9ICBcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIGlmIChbJzcnLCc4JywnOSddLmluY2x1ZGVzKGlucHV0TnVtYmVyc1ZhbHVlWzBdKSkge1xuICAgICAgICAvL3J1c3NpYW4gbnVtYmVyXG4gIFxuICAgICAgICBpZiAoaW5wdXROdW1iZXJzVmFsdWVbMF0gPT0gXCI5XCIpIGlucHV0TnVtYmVyc1ZhbHVlID0gXCI3XCIgKyBpbnB1dE51bWJlcnNWYWx1ZTsgICAgICBcbiAgICAgICAgbGV0IGZpcnN0U2ltYm9scyA9IChpbnB1dE51bWJlcnNWYWx1ZVswXSA9PSBcIjhcIikgPyBcIjhcIiA6IFwiKzdcIjtcbiAgXG4gICAgICAgIGZvcm1hdGVkSW5wdXRWYWx1ZSA9IGZpcnN0U2ltYm9scyArIFwiIFwiO1xuICBcbiAgICAgICAgaWYgKGlucHV0TnVtYmVyc1ZhbHVlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBmb3JtYXRlZElucHV0VmFsdWUgKz0gXCIoXCIgKyBpbnB1dE51bWJlcnNWYWx1ZS5zdWJzdHJpbmcoMSwgNCk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpbnB1dE51bWJlcnNWYWx1ZS5sZW5ndGggPj0gNSkge1xuICAgICAgICAgIGZvcm1hdGVkSW5wdXRWYWx1ZSArPSBcIikgXCIgKyBpbnB1dE51bWJlcnNWYWx1ZS5zdWJzdHJpbmcoNCwgNyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpbnB1dE51bWJlcnNWYWx1ZS5sZW5ndGggPj0gOCkge1xuICAgICAgICAgIGZvcm1hdGVkSW5wdXRWYWx1ZSArPSBcIi1cIiArIGlucHV0TnVtYmVyc1ZhbHVlLnN1YnN0cmluZyg3LCA5KTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGlucHV0TnVtYmVyc1ZhbHVlLmxlbmd0aCA+PSAxMCkge1xuICAgICAgICAgIGZvcm1hdGVkSW5wdXRWYWx1ZSArPSBcIi1cIiArIGlucHV0TnVtYmVyc1ZhbHVlLnN1YnN0cmluZyg5LCAxMSk7XG4gICAgICAgIH1cbiAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL25vdCBydXNcbiAgICAgICAgZm9ybWF0ZWRJbnB1dFZhbHVlID0gXCIrXCIgKyBpbnB1dE51bWJlcnNWYWx1ZTtcbiAgICAgIH1cbiAgXG4gICAgICBpbnB1dC52YWx1ZSA9IGZvcm1hdGVkSW5wdXRWYWx1ZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IG9uUGhvbmVLZXlEb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcbiAgICAgIGlmIChlLmtleUNvZGUgPT0gOCAmJiBnZXRJbnB1dE51bWJlcnNWYWx1ZShpbnB1dCkubGVuZ3RoID09IDEpe1xuICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICB9XG4gICAgICBcbiAgICB9XG4gIFxuICAgIGNvbnN0IG9uUGhvbmVQYXN0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGxldCBwYXN0ZWQgPSBlLmNsaXBib2FyZERhdGEgfHwgd2luZG93LmNsaXBib2FyZERhdGEsXG4gICAgICAgIGlucHV0ID0gZS50YXJnZXQsXG4gICAgICAgIGlucHV0TnVtYmVyc1ZhbHVlID0gZ2V0SW5wdXROdW1iZXJzVmFsdWUoaW5wdXQpO1xuICBcbiAgICAgICAgaWYgKHBhc3RlZCl7XG4gICAgICAgICAgbGV0IHBhc3RlZFRleHQgPSBwYXN0ZWQuZ2V0RGF0YSgnVGV4dCcpO1xuICAgICAgICAgIGlmICgvXFxEL2cudGVzdChwYXN0ZWRUZXh0KSl7XG4gICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBpbnB1dE51bWJlcnNWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gIFxuICAgIHBob25lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvblBob25lSW5wdXQpO1xuICAgIHBob25lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uUGhvbmVLZXlEb3duKTtcbiAgICBwaG9uZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgb25QaG9uZVBhc3RlKTtcbiAgfSlcbn1cbiJdfQ==
